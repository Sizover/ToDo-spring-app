# Сквозные автотесты

Репозиторий для автоматизированного E2E тестирование КИАП

## Примененные продукты

Тесты написаны на языке kotlin с использованием драйвера управления браузером "selenium webdriver" и расширяющей его надстройкой Selenide.  
Также в проекте используется Apache Commons IO.  
Управление запуском тестов и формирование отчетов реализовано с помощью TestNG.

## Тесты

Расположение непосредственно тестов: testing-e2e/src/test/kotlin

1. Dicts INC 0010 Проверка наличия и работоспособности языка обращения в карточке обращения
2. Dicts CP 0010 Создание, изменение, перемещение и удаление пунктов реагирования
3. Labels 0010 Проверка создания, прикрепления к КП и удаления метки
4. Search 0010 Проверка создания, поиска и удаления справочных сущностей некоторых справочников
5. Event INC 5020 Nicholas (проверка возникновения критической ошибки после перехода Аудит -> редактирование МО)
6. Event INC 5030 Предупреждение о ложном вызове актуально месяц
7. Status 0010 Проверка сумарного статуса родительской КП
8. MT_001 Проверка отображения значов на карте при применении различных фильтров карты
9. MT_002 Проверка перехода по координатам места происшествия
10. MT_002 Проверка PM1363~B - Общая ошибка приложения после обновления страницы карты
11. PMI 0010 Проверка загрузки таблиц справочников
12. PMI 0020 Проверка загрузки и иерархии справочника "Типы происшествий"
13. PMI 0030 Проверка наличия Организаций с метками ОМПЛ, ПОО и СЗО в справочнике «Организации»
14. PMI 0080 Проверка наличия КП в различных статусах
15. PMI 0090 Проверка загрузки таблицы «Архив происшествий»
16. PMI 0100 Проверка процедуры авторизации в системе
17. PMI 0110 Регистрация вызова (формирование карточки происшествия)(С прикреплением файлов)
18. PMI 0120 Проверка наличия опросника абонента (заявителя)
19. PMI 0130 Регистрация вызова (формирование карточки происшествия) с проверкой выполнения плана реагирования
20. PMI 0140 Проверка фильтрации карточек происшествия
21. PMI 0150 Назначение карточки происшествия на службу ДДС-ЕДДС с последующей проверкой изменения статуса родительской карточки
22. PMI 0160 Назначение сил и средств в КП
23. PMI 0112 Назначение КП из 112 в КИАП
24. PMI 0180 Просмотр паспортов опасных объектов
25. PMI 0220 Проверка открытия карточек справочных сущностей
26. PMI 0230 Проверка поиска справочных данных
27. PMI 0241 Проверка наличия справочников с иерархической системой классификации
28. PMI 0250 Проверка присвоения и удаления меток в карточке организации
29. PMI 0260 Проверка использования ассоциативных связей-ссылок между объектами справочников
30. PMI 0270 Проверка возможности создания, удаления записей, просмотра детальной истории в справочнике должностных лиц
31. Reports 0010 Проверка формирования отчетов по обращениям
32. Reports 0020 Проверка формирования отчетов по деятельности сотрудников
33. Reports 0030 проверка отчетов по происшествиям с использованием фильтров по пострадавшим, адресу и типу происшествия
34. Reports 0070 Расширенная проверка формирования отчетов
35. KB 0010 Создание и редактирование раздела, добавление и редактирование статьи
36. KB 0020 Проверка фильтров статей БЗ
37. CF 0010 Проверка скачивания и корректности табличного CSV файла

## Архитектура?

Для управления составом запускаемых тестов используется аннотация @org.testng.annotations.Test с передачей параметра groups.  
Параметр groups указывается в файле *testng.xml, запуск которого и запускает настроенную пачку тестов

Одинаковые тесты запускаемые для разных условий реализованы одним тестом в связке с параметром аннотации "dataProvider", указывающим на функцию с аннотацией @DataProvider, передающую в тест пачку параметров.  
Т.о. падение теста на любом из пакетов параметров не остановит проверку на последующих параметрах.

Повторный перезапуск упавших тестов реализован параметром аннотации retryAnalyzer, указывающим на класс содержащий функцию счетчика запусков (Retry.kt).  
Дефолтное значение - 3
